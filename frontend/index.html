<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Teacher Management System</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app">
    <!-- Login Overlay (shown first) -->
    <div id="login-overlay" class="login-overlay">
      <div class="login-box">
        <h2>Teacher Login</h2>
        <input id="login-username" placeholder="Username" />
        <input id="login-password" placeholder="Password" type="password" />
        <div class="login-actions">
          <button id="login-submit" class="btn btn-primary">Log in</button>
          <button id="open-request" class="btn">Request Account</button>
        </div>
        <p class="muted">If you don't have an account ask the admin or click Request Account.</p>
      </div>
    </div>

    <!-- Sidebar Navigation -->
    <aside class="sidebar">
      <div class="sidebar-user" id="sidebar-user">
        <div class="avatar small" id="sidebar-avatar">T</div>
        <div class="sidebar-user-info">
          <div id="sidebar-username">Not signed in</div>
          <div id="sidebar-user-role" class="muted">Guest</div>
        </div>
      </div>
      <nav class="menu">
        <a href="#" class="menu-item active" data-page="dashboard">ğŸ“Š Dashboard</a>
        <a href="#" class="menu-item" data-page="classes">ğŸ‘¥ Classes</a>
        <a href="#" class="menu-item" data-page="students">ğŸ‘¨â€ğŸ“ Students</a>
        <a href="#" class="menu-item" data-page="attendance">ğŸ“‹ Attendance</a>
        <a href="#" class="menu-item" data-page="assignments">ğŸ“ Assignments</a>
        <a href="#" class="menu-item" data-page="gradebook">ğŸ“Š Gradebook</a>
        <a href="#" class="menu-item" data-page="analytics">ğŸ“ˆ Analytics</a>
        <a href="#" class="menu-item" data-page="ai-insights">ğŸ¤– AI Insights</a>
        <a href="#" class="menu-item" data-page="phase2-smart-classroom">ğŸ“ Phase 2: Smart Class</a>
        <a href="#" class="menu-item" data-page="phase3-security">ğŸ”’ Phase 3: Security</a>
        <a href="#" class="menu-item" data-page="resources">ğŸ“š Resources</a>
        <a href="#" class="menu-item" data-page="communications">ğŸ’¬ Communications</a>
        <a href="#" class="menu-item" data-page="meetings">ğŸ¤ Meetings</a>
      </nav>
    </aside>

    <!-- Main Content Area -->
    <main class="main-content">
      <!-- Top Bar -->
      <div class="topbar">
        <h2 id="page-title">Dashboard</h2>
        <div class="ai-top">
          <input id="ai-prompt" class="prompt-input" placeholder="Ask the AI: summarize class performance, suggest interventions..." />
          <button id="ai-prompt-btn" class="btn btn-primary">Ask AI</button>
          <span class="ai-badge">ğŸ¤– AI</span>
        </div>
          <div class="user-profile">
          <span id="user-display">Not signed in</span>
          <button id="btn-login" class="btn btn-small">Log in</button>
          <button id="btn-logout" class="btn btn-small" style="display:none;">Log out</button>
          <div class="avatar">T</div>
        </div>
      </div>

      <!-- Content Pages -->
      <div class="content">
        <!-- Dashboard Page -->
        <section id="dashboard" class="page active">
          <div class="grid">
            <div class="card stat-card">
              <h3>Total Classes</h3>
              <p class="stat-number" id="stat-classes">0</p>
            </div>
            <div class="card stat-card">
              <h3>Total Students</h3>
              <p class="stat-number" id="stat-students">0</p>
            </div>
            <div class="card stat-card">
              <h3>Avg Attendance</h3>
              <p class="stat-number" id="stat-attendance">0%</p>
            </div>
            <div class="card stat-card">
              <h3>Pending Assignments</h3>
              <p class="stat-number" id="stat-assignments">0</p>
            </div>
          </div>
          <div class="card">
            <h3>Quick Actions</h3>
            <div class="button-group">
              <button class="btn btn-primary" data-action="new-class">+ New Class</button>
              <button class="btn btn-primary" data-action="add-student">+ Add Student</button>
              <button class="btn btn-primary" data-action="mark-attendance">ğŸ“‹ Mark Attendance</button>
              <button class="btn btn-primary" data-action="create-assignment">ğŸ“ Create Assignment</button>
            </div>
          </div>

          <!-- AI Insights Panel -->
          <div class="card ai-panel">
            <h3>AI Insights</h3>
            <p class="muted">Quick, actionable suggestions generated by the AI engine.</p>
            <div class="ai-grid">
              <div class="ai-card">
                <div class="ai-header">Class Performance</div>
                <div class="ai-body">Example: The average score dropped 6% last week. Consider a revision lesson on core topics.</div>
              </div>
              <div class="ai-card">
                <div class="ai-header">At-risk Students</div>
                <div class="ai-body">Example: Student A and Student B show low engagement â€” schedule a one-to-one meeting.</div>
              </div>
              <div class="ai-card">
                <div class="ai-header">Suggested Activities</div>
                <div class="ai-body">Example: Add a short formative quiz focused on algebraic manipulation.</div>
              </div>
            </div>
          </div>
        </section>

        <!-- Classes Page -->
        <section id="classes" class="page">
          <div class="card">
            <h3>My Classes</h3>
            <button class="btn btn-primary" data-action="new-class">+ New Class</button>
            <div id="classes-list" class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>Class Name</th>
                    <th>Section</th>
                    <th>Subject</th>
                    <th>Students</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="classes-tbody"></tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- Students Page -->
        <section id="students" class="page">
          <div class="card">
            <h3>Students</h3>
            <button class="btn btn-primary" data-action="add-student">+ Add Student</button>
            <button class="btn btn-secondary" id="bulk-import-btn">ğŸ“¥ Bulk Import (CSV)</button>
            <div id="students-list" class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Roll No</th>
                    <th>Class</th>
                    <th>Attendance %</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="students-tbody"></tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- Attendance Page -->
        <section id="attendance" class="page">
          <div class="card">
            <h3>Mark Attendance</h3>
            <select id="attendance-class" class="input">
              <option>Select Class</option>
            </select>
            <div id="attendance-form" class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>Student</th>
                    <th>Status</th>
                    <th>Reason</th>
                  </tr>
                </thead>
                <tbody id="attendance-tbody"></tbody>
              </table>
            </div>
            <button class="btn btn-primary" id="save-attendance">Save Attendance</button>
          </div>
        </section>

        <!-- Assignments Page -->
        <section id="assignments" class="page">
          <div class="card">
            <h3>Assignments</h3>
            <button class="btn btn-primary" data-action="create-assignment">+ Create Assignment</button>
            <div id="assignments-list" class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>Title</th>
                    <th>Class</th>
                    <th>Due Date</th>
                    <th>Submissions</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="assignments-tbody"></tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- Gradebook Page -->
        <section id="gradebook" class="page">
          <div class="card">
            <h3>Gradebook</h3>
            <select id="gradebook-class" class="input">
              <option>Select Class</option>
            </select>
            <select id="gradebook-assignment" class="input">
              <option>Select Assignment</option>
            </select>
            <div id="gradebook-form" class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>Student</th>
                    <th>Marks</th>
                    <th>Feedback</th>
                  </tr>
                </thead>
                <tbody id="gradebook-tbody"></tbody>
              </table>
            </div>
            <button class="btn btn-primary" id="save-grades">Save Grades</button>
          </div>
        </section>

        <!-- Analytics Page -->
        <section id="analytics" class="page">
          <div class="grid">
            <div class="card">
              <h3>Top Performers</h3>
              <div id="top-performers"></div>
            </div>
            <div class="card">
              <h3>Weak Topics</h3>
              <div id="weak-topics"></div>
            </div>
          </div>
          <div class="card">
            <h3>Class Performance</h3>
            <div style="display:flex;gap:12px;align-items:center;margin-bottom:12px;">
              <label for="analytics-class-select" class="muted">Class:</label>
              <select id="analytics-class-select" class="input" style="max-width:320px;"></select>
              <div id="analytics-overall" class="muted" style="margin-left:auto;font-weight:600"></div>
            </div>
            <canvas id="performance-chart"></canvas>
          </div>
        </section>

        <!-- Resources Page -->
        <section id="resources" class="page">
          <div class="card">
            <h3>Learning Resources</h3>
            <button class="btn btn-primary" data-action="upload-resource">+ Upload Resource</button>
            <div id="resources-list"></div>
          </div>
        </section>

        <!-- Communications Page -->
        <section id="communications" class="page">
          <div class="card">
            <h3>Messages & Announcements</h3>
            <div id="messages-list"></div>
            <div class="form-group">
              <textarea id="message-input" placeholder="Type a message..."></textarea>
              <button class="btn btn-primary" id="send-message">Send Message</button>
            </div>
          </div>
        </section>

        <!-- Meetings Page -->
        <section id="meetings" class="page">
          <div class="card">
            <h3>Parent-Teacher Meetings</h3>
            <button class="btn btn-primary" data-action="schedule-meeting">+ Schedule Meeting</button>
            <div id="meetings-list" class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>Student</th>
                    <th>Parent</th>
                    <th>Date</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="meetings-tbody"></tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- AI Insights Page -->
        <section id="ai-insights" class="page">
          <div class="card">
            <h3>ğŸ¤– AI-Powered Student Intelligence</h3>
            <p class="muted">Predictive analytics, knowledge gaps, and adaptive recommendations</p>
            
            <div style="margin-bottom: 20px;">
              <label for="ai-class-select" style="font-weight: 600;">Select Class:</label>
              <select id="ai-class-select" class="input" style="max-width: 320px; margin-top: 8px;"></select>
            </div>

            <!-- At-Risk Students Alert -->
            <div class="card" style="background: #fff3cd; border-left: 4px solid #ff6b6b;">
              <h4>âš ï¸ Students at Risk</h4>
              <div id="ai-at-risk-students"></div>
            </div>

            <!-- Top Performers -->
            <div class="card" style="background: #d4edda; border-left: 4px solid #51cf66;">
              <h4>â­ Top Performers</h4>
              <div id="ai-top-students"></div>
            </div>

            <!-- Performance Heatmap -->
            <div class="card">
              <h4>ğŸ“Š Concept-wise Performance Heatmap</h4>
              <div id="ai-heatmap" style="overflow-x: auto;"></div>
            </div>

            <!-- Grading Insights -->
            <div class="card">
              <h4>ğŸ“ˆ Grading Insights & Recommendations</h4>
              <div id="ai-grading-insights"></div>
            </div>

            <!-- Generate Quiz Modal Button -->
            <div class="card">
              <h4>âœ¨ AI-Generated Content</h4>
              <button class="btn btn-primary" id="generate-quiz-btn">Generate AI Quiz</button>
              <button class="btn btn-primary" id="generate-worksheet-btn" style="margin-left: 8px;">Generate Remedial Worksheet</button>
            </div>
          </div>
        </section>

        <!-- Phase 2: Smart Classroom & Lesson Planning Page -->
        <section id="phase2-smart-classroom" class="page">
          <div class="card">
            <h3>ğŸ“ Phase 2: Smart Classroom Monitoring</h3>
            <p class="muted">Real-time doubt tracking, lesson planning, and personalized feedback</p>
            
            <div style="margin-bottom: 20px;">
              <label for="p2-class-select" style="font-weight: 600;">Select Class:</label>
              <select id="p2-class-select" class="input" style="max-width: 320px; margin-top: 8px;"></select>
            </div>

            <!-- Real-time Classroom Dashboard -->
            <div class="card">
              <h4>ğŸ“Š Real-time Classroom Dashboard</h4>
              <div id="p2-classroom-dashboard"></div>
            </div>

            <!-- Engagement Heatmap -->
            <div class="card">
              <h4>ğŸ”¥ Student Engagement Heatmap</h4>
              <div id="p2-engagement-heatmap" style="overflow-x: auto;"></div>
            </div>

            <!-- Lesson Planning Tools -->
            <div class="card">
              <h4>ğŸ“– AI Lesson Planning</h4>
              <button class="btn btn-primary" id="generate-lesson-btn">Generate Lesson Plan</button>
              <button class="btn" id="suggest-lesson-time-btn" style="margin-left: 8px;">Suggest Optimal Time</button>
            </div>

            <!-- Feedback Generator -->
            <div class="card">
              <h4>ğŸ’¬ Generate Personalized Feedback</h4>
              <label for="p2-student-select" style="margin-right: 12px;">Student:</label>
              <select id="p2-student-select" class="input" style="max-width: 320px; display: inline-block;"></select>
              <button class="btn btn-primary" id="generate-feedback-btn" style="margin-left: 8px;">Generate Feedback</button>
              <div id="p2-feedback-result" style="margin-top: 16px;"></div>
            </div>

            <!-- Content Recommendations -->
            <div class="card">
              <h4>ğŸ“š Smart Content Recommendations</h4>
              <label for="p2-content-student" style="margin-right: 12px;">Student:</label>
              <select id="p2-content-student" class="input" style="max-width: 320px; display: inline-block;"></select>
              <button class="btn btn-primary" id="get-recommendations-btn" style="margin-left: 8px;">Get Recommendations</button>
              <div id="p2-recommendations-result" style="margin-top: 16px;"></div>
            </div>
          </div>
        </section>

        <!-- Phase 3: Security & Optimization Page -->
        <section id="phase3-security" class="page">
          <div class="card">
            <h3>ğŸ”’ Phase 3: Security, Optimization & Parent Insights</h3>
            <p class="muted">Anti-cheating, schedule optimization, and parent-friendly reports</p>
            
            <div style="margin-bottom: 20px;">
              <label for="p3-class-select" style="font-weight: 600;">Select Class:</label>
              <select id="p3-class-select" class="input" style="max-width: 320px; margin-top: 8px;"></select>
            </div>

            <!-- Schedule Optimization -->
            <div class="card">
              <h4>â±ï¸ Schedule Optimization</h4>
              <button class="btn btn-primary" id="optimize-schedule-btn">Analyze & Optimize</button>
              <div id="p3-schedule-result" style="margin-top: 12px;"></div>
            </div>

            <!-- Student Pattern Analysis -->
            <div class="card">
              <h4>ğŸ“ˆ Student Learning Pattern Analysis</h4>
              <label for="p3-student-select" style="margin-right: 12px;">Student:</label>
              <select id="p3-student-select" class="input" style="max-width: 320px; display: inline-block;"></select>
              <button class="btn btn-primary" id="analyze-pattern-btn" style="margin-left: 8px;">Analyze</button>
              <div id="p3-pattern-result" style="margin-top: 12px;"></div>
            </div>

            <!-- Parent Report -->
            <div class="card">
              <h4>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Parent-Friendly Report</h4>
              <label for="p3-parent-student" style="margin-right: 12px;">Student:</label>
              <select id="p3-parent-student" class="input" style="max-width: 320px; display: inline-block;"></select>
              <button class="btn btn-primary" id="generate-parent-report-btn" style="margin-left: 8px;">Generate Report</button>
              <div id="p3-parent-report" style="margin-top: 12px;"></div>
            </div>

            <!-- Class Parent Insights -->
            <div class="card">
              <h4>ğŸ“Š Class Parent Insights</h4>
              <button class="btn btn-primary" id="class-parent-insights-btn">View Class Insights</button>
              <div id="p3-class-parent-insights" style="margin-top: 12px;"></div>
            </div>

            <!-- Student Cohort Comparison -->
            <div class="card">
              <h4>ğŸ¯ Student Cohort Comparison</h4>
              <label for="p3-compare-student" style="margin-right: 12px;">Student:</label>
              <select id="p3-compare-student" class="input" style="max-width: 320px; display: inline-block;"></select>
              <button class="btn btn-primary" id="compare-cohort-btn" style="margin-left: 8px;">Compare</button>
              <div id="p3-cohort-comparison" style="margin-top: 12px;"></div>
            </div>

            <!-- Anti-Cheating Info -->
            <div class="card" style="background: #f8d7da; border-left: 4px solid #dc3545;">
              <h4>ğŸ” Anti-Cheating Proctoring (Coming Soon)</h4>
              <p>Advanced proctoring features with webcam monitoring, screen detection, and integrity scoring will be available soon.</p>
            </div>
          </div>
        </section>
      </div>
    </main>
  </div>

  <script src="app.js"></script>
  <!-- Request Account Page (shown when user clicks Request Account) -->
  <section id="request-account" class="page">
    <div class="card" style="max-width:640px; margin:40px auto;">
      <h3>Request Teacher Account</h3>
      <p>If you are a teacher and need an account, submit the request below. The admin will review and create your account.</p>
      <div class="form-group">
        <label for="req-name">Full name</label>
        <input id="req-name" placeholder="Full name" />
      </div>
      <div class="form-group">
        <label for="req-school">School name</label>
        <input id="req-school" placeholder="School name" />
      </div>
      <div class="form-group">
        <label for="req-email">Email (optional)</label>
        <input id="req-email" placeholder="Email (optional)" />
      </div>
      <div class="form-group">
        <label for="req-subjects">Subjects (comma-separated)</label>
        <input id="req-subjects" placeholder="Subjects (comma-separated)" />
      </div>
      <div style="display:flex; gap:8px; justify-content:flex-end; margin-top:12px;">
        <button id="req-submit" class="btn btn-primary">Submit Request</button>
        <button id="req-cancel" class="btn">Cancel</button>
      </div>
    </div>
  </section>
  <!-- Connect Student Modal -->
  <div id="connect-student-modal" class="modal" style="display:none;">
    <div class="modal-content">
      <h3>Connect Student to Class</h3>
      <p id="connect-modal-classname" class="muted"></p>
      <div id="connect-student-list" style="max-height:300px; overflow:auto; margin-top:12px;"></div>
      <div class="modal-actions">
        <button id="connect-submit" class="btn btn-primary">Connect</button>
        <button id="connect-cancel" class="btn">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Create Assignment Modal -->
  <div id="create-assignment-modal" class="modal" style="display:none;">
    <div class="modal-content">
      <h3>Create Assignment</h3>
      <div class="form-group">
        <label for="ca-class">Class</label>
        <select id="ca-class" class="input"></select>
      </div>
      <div class="form-group">
        <label for="ca-title">Title</label>
        <input id="ca-title" class="input" />
      </div>
      <div class="form-group">
        <label for="ca-desc">Description</label>
        <textarea id="ca-desc"></textarea>
      </div>
      <div class="form-group">
        <label for="ca-due">Due Date</label>
        <input id="ca-due" class="input" placeholder="YYYY-MM-DD" />
      </div>
      <div class="form-group">
        <label for="ca-total">Total Marks</label>
        <input id="ca-total" class="input" type="number" value="100" />
      </div>
      <div class="modal-actions">
        <button id="ca-submit" class="btn btn-primary">Create</button>
        <button id="ca-cancel" class="btn">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Schedule Meeting Modal -->
  <div id="schedule-meeting-modal" class="modal" style="display:none;">
    <div class="modal-content">
      <h3>Schedule Parent-Teacher Meeting</h3>
      <div class="form-group">
        <label for="sm-class">Class</label>
        <select id="sm-class" class="input"></select>
      </div>
      <div class="form-group">
        <label for="sm-student">Student</label>
        <select id="sm-student" class="input"></select>
      </div>
      <div class="form-group">
        <label for="sm-parent">Parent / Guardian Name</label>
        <input id="sm-parent" class="input" />
      </div>
      <div class="form-group">
        <label for="sm-date">Scheduled Date & Time</label>
        <input id="sm-date" class="input" placeholder="YYYY-MM-DD HH:MM" />
      </div>
      <div class="modal-actions">
        <button id="sm-submit" class="btn btn-primary">Schedule</button>
        <button id="sm-cancel" class="btn">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Bulk Import Modal -->
  <div id="bulk-import-modal" class="modal" style="display:none;">
    <div class="modal-content" style="max-width:600px;">
      <h3>Bulk Import Students</h3>
      <p class="muted">Paste CSV data below. Format: name, rollNo, email, phone (one student per line)</p>
      <div class="form-group">
        <textarea id="bulk-import-csv" placeholder="Alice,S001,alice@example.com,9876543210&#10;Bob,S002,bob@example.com,9876543211" style="min-height:200px;"></textarea>
      </div>
      <div class="modal-actions">
        <button id="bi-submit" class="btn btn-primary">Import</button>
        <button id="bi-cancel" class="btn">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Generate Quiz Modal -->
  <div id="generate-quiz-modal" class="modal" style="display:none;">
    <div class="modal-content" style="max-width:600px;">
      <h3>Generate AI Quiz</h3>
      <div class="form-group">
        <label for="gq-class">Class</label>
        <select id="gq-class" class="input"></select>
      </div>
      <div class="form-group">
        <label for="gq-topics">Topics (comma-separated)</label>
        <input id="gq-topics" class="input" placeholder="Algebra, Geometry, Calculus" />
      </div>
      <div class="form-group">
        <label for="gq-difficulty">Difficulty Level</label>
        <select id="gq-difficulty" class="input">
          <option value="easy">Easy</option>
          <option value="medium" selected>Medium</option>
          <option value="hard">Hard</option>
        </select>
      </div>
      <div class="form-group">
        <label for="gq-questions">Number of Questions</label>
        <input id="gq-questions" class="input" type="number" value="10" min="5" max="50" />
      </div>
      <div class="modal-actions">
        <button id="gq-submit" class="btn btn-primary">Generate</button>
        <button id="gq-cancel" class="btn">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Generate Worksheet Modal -->
  <div id="generate-worksheet-modal" class="modal" style="display:none;">
    <div class="modal-content" style="max-width:600px;">
      <h3>Generate Remedial Worksheet</h3>
      <div class="form-group">
        <label for="gw-student">Select Student</label>
        <select id="gw-student" class="input"></select>
      </div>
      <div class="form-group">
        <label for="gw-topic">Topic</label>
        <input id="gw-topic" class="input" placeholder="e.g., Quadratic Equations" />
      </div>
      <div class="form-group">
        <label for="gw-difficulty">Difficulty Level</label>
        <select id="gw-difficulty" class="input">
          <option value="beginner" selected>Beginner</option>
          <option value="intermediate">Intermediate</option>
          <option value="advanced">Advanced</option>
        </select>
      </div>
      <div class="modal-actions">
        <button id="gw-submit" class="btn btn-primary">Generate</button>
        <button id="gw-cancel" class="btn">Cancel</button>
      </div>
    </div>
  </div>
  <!-- Global loader & toasts -->
  <div id="global-loader" class="loader-overlay" style="display:none;" aria-hidden="true">
    <div class="spinner" role="status" aria-live="polite">
      <svg width="48" height="48" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <circle cx="25" cy="25" r="20" fill="none" stroke="#e6eef8" stroke-width="6"></circle>
        <path d="M45 25a20 20 0 0 0-20-20" stroke="currentColor" stroke-width="6" stroke-linecap="round" fill="none"/>
      </svg>
      <span class="sr-only">Loading</span>
    </div>
  </div>
  <div id="toast-container" class="toast-container" aria-live="polite" aria-atomic="true"></div>
</body>
</html>
